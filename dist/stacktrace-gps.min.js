!function(e,t){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],t):"object"==typeof exports?module.exports=t():e.StackFrame=t()}(this,function(){"use strict";function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return e.charAt(0).toUpperCase()+e.substring(1)}function e(e){return function(){return this[e]}}var t=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],o=["fileName","functionName","source"],s=t.concat(i,o,["args"]);function u(e){if(e instanceof Object)for(var t=0;t<s.length;t++)e.hasOwnProperty(s[t])&&void 0!==e[s[t]]&&this["set"+r(s[t])](e[s[t]])}u.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof u)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(n(this.getLineNumber())?":"+this.getLineNumber():"")+(n(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var a=0;a<t.length;a++)u.prototype["get"+r(t[a])]=e(t[a]),u.prototype["set"+r(t[a])]=function(t){return function(e){this[t]=Boolean(e)}}(t[a]);for(var c=0;c<i.length;c++)u.prototype["get"+r(i[c])]=e(i[c]),u.prototype["set"+r(i[c])]=function(t){return function(e){if(!n(e))throw new TypeError(t+" must be a Number");this[t]=Number(e)}}(i[c]);for(var f=0;f<o.length;f++)u.prototype["get"+r(o[f])]=e(o[f]),u.prototype["set"+r(o[f])]=function(t){return function(e){this[t]=String(e)}}(o[f]);return u}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],t):"object"==typeof exports?module.exports=t(require("source-map/lib/source-map-consumer"),require("stackframe")):e.StackTraceGPS=t(e.SourceMap||e.sourceMap,e.StackFrame)}(this,function(o,f){"use strict";function t(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("get",r),n.onerror=t,n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300||"file://"===r.substr(0,7)&&n.responseText?e(n.responseText):t(new Error("HTTP status: "+n.status+" retrieving "+r)))},n.send()})}function n(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function r(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}return function e(c){if(!(this instanceof e))return new e(c);c=c||{},this.sourceCache=c.sourceCache||{},this.sourceMapConsumerCache=c.sourceMapConsumerCache||{},this.ajax=c.ajax||t,this._atob=c.atob||n,this._get=function(a){return new Promise(function(e,t){var n="data:"===a.substr(0,5);if(this.sourceCache[a])e(this.sourceCache[a]);else if(c.offline&&!n)t(new Error("Cannot make network requests in offline mode"));else if(n){var r=a.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(r){var i=r[0].length,o=a.substr(i),s=this._atob(o);e(this.sourceCache[a]=s)}else t(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(a,{method:"get"});(this.sourceCache[a]=u).then(e,t)}}.bind(this))},this._getSourceMapConsumer=function(r,i){return new Promise(function(e,t){if(this.sourceMapConsumerCache[r])e(this.sourceMapConsumerCache[r]);else{var n=new Promise(function(t,e){return this._get(r).then(function(e){"string"==typeof e&&(e=function(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}(e.replace(/^\)\]\}'/,""))),void 0===e.sourceRoot&&(e.sourceRoot=i),t(new o.SourceMapConsumer(e))},e)}.bind(this));e(this.sourceMapConsumerCache[r]=n)}}.bind(this))},this.pinpoint=function(t){return new Promise(function(n,e){this.getMappedLocation(t).then(function(e){function t(){n(e)}this.findFunctionName(e).then(n,t).catch(t)}.bind(this),e)}.bind(this))},this.findFunctionName=function(o){return new Promise(function(i,e){r(o),this._get(o.fileName).then(function(e){var t=o.lineNumber,n=o.columnNumber,r=function(e,t){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=e.split("\n"),i="",o=Math.min(t,20),s=0;s<o;++s){var u=r[t-s-1],a=u.indexOf("//");if(0<=a&&(u=u.substr(0,a)),u){i=u+i;for(var c=n.length,f=0;f<c;f++){var h=n[f].exec(i);if(h&&h[1])return h[1]}}}}(e,t);i(r?new f({functionName:r,args:o.args,fileName:o.fileName,lineNumber:t,columnNumber:n}):o)},e).catch(e)}.bind(this))},this.getMappedLocation=function(c){return new Promise(function(u,e){!function(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}(),r(c);var a=this.sourceCache,i=c.fileName;this._get(i).then(function(e){var t=function(e){for(var t,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(e);)t=n[1];if(t)return t;throw new Error("sourceMappingURL not found")}(e),n="data:"===t.substr(0,5),r=i.substring(0,i.lastIndexOf("/")+1);return"/"===t[0]||n||/^https?:\/\/|^\/\//i.test(t)||(t=r+t),this._getSourceMapConsumer(t,r).then(function(e){return(i=c,o=e,s=a,new Promise(function(e,t){var n=o.originalPositionFor({line:i.lineNumber,column:i.columnNumber});if(n.source){var r=o.sourceContentFor(n.source);r&&(s[n.source]=r),e(new f({functionName:n.name||i.functionName,args:i.args,fileName:n.source,lineNumber:n.line,columnNumber:n.column}))}else t(new Error("Could not get original source for given stackframe and source map"))})).then(u).catch(function(){u(c)});var i,o,s})}.bind(this),e).catch(e)}.bind(this))}}});
//# sourceMappingURL=stacktrace-gps.min.js.map
