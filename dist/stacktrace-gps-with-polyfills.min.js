!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function c(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,e=void 0,o=void 0,u=function(t,e){l[r]=t,l[r+1]=e,2===(r+=2)&&(o?o(p):g())};var t="undefined"!=typeof window?window:void 0,i=t||{},s=i.MutationObserver||i.WebKitMutationObserver,a="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(p,1)}}var l=new Array(1e3);function p(){for(var t=0;t<r;t+=2){(0,l[t])(l[t+1]),l[t]=void 0,l[t+1]=void 0}r=0}var m,d,v,b,g=void 0;function y(t,e){var n=arguments,r=this,o=new this.constructor(N);void 0===o[_]&&Z(o);var i,s=r._state;return s?(i=n[s-1],u(function(){return q(s,o,i,r._result)})):F(r,o,t,e),o}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(N);return M(e,t),e}g=a?function(){return process.nextTick(p)}:s?(d=0,v=new s(p),b=document.createTextNode(""),v.observe(b,{characterData:!0}),function(){b.data=d=++d%2}):f?((m=new MessageChannel).port1.onmessage=p,function(){return m.port2.postMessage(0)}):void 0===t&&"function"==typeof require?function(){try{var t=require("vertx");return e=t.runOnLoop||t.runOnContext,function(){e(p)}}catch(t){return h()}}():h();var _=Math.random().toString(36).substring(16);function N(){}var A=void 0,C=1,S=2,E=new L;function j(t){try{return t.then}catch(t){return E.error=t,E}}function O(t,e,n){var r,o,i,s;e.constructor===t.constructor&&n===y&&e.constructor.resolve===w?(i=t,(s=e)._state===C?T(i,s._result):s._state===S?x(i,s._result):F(s,void 0,function(t){return M(i,t)},function(t){return x(i,t)})):n===E?x(t,E.error):void 0===n?T(t,e):c(n)?(r=e,o=n,u(function(e){var n=!1,t=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(o,r,function(t){n||(n=!0,r!==t?M(e,t):T(e,t))},function(t){n||(n=!0,x(e,t))},e._label);!n&&t&&(n=!0,x(e,t))},t)):T(t,e)}function M(t,e){var n;t===e?x(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?O(t,e,j(e)):T(t,e)}function P(t){t._onerror&&t._onerror(t._result),k(t)}function T(t,e){t._state===A&&(t._result=e,t._state=C,0!==t._subscribers.length&&u(k,t))}function x(t,e){t._state===A&&(t._state=S,t._result=e,u(P,t))}function F(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+C]=n,o[i+S]=r,0===i&&t._state&&u(k,t)}function k(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?q(n,r,o,i):o(i);t._subscribers.length=0}}function L(){this.error=null}var $=new L;function q(t,e,n,r){var o=c(n),i=void 0,s=void 0,u=void 0,a=void 0;if(o){if((i=function(t,e){try{return t(e)}catch(t){return $.error=t,$}}(n,r))===$?(a=!0,s=i.error,i=null):u=!0,e===i)return void x(e,new TypeError("A promises callback cannot return that same promise."))}else i=r,u=!0;e._state!==A||(o&&u?M(e,i):a?x(e,s):t===C?T(e,i):t===S&&x(e,i))}var z=0;function Z(t){t[_]=z++,t._state=void 0,t._result=void 0,t._subscribers=[]}function G(t,e){this._instanceConstructor=t,this.promise=new t(N),this.promise[_]||Z(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&T(this.promise,this._result))):x(this.promise,new Error("Array Methods must be provided an Array"))}function R(t){this[_]=z++,this._result=this._state=void 0,this._subscribers=[],N!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof R?function(e,t){try{t(function(t){M(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function U(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=R}return G.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===A&&n<t;n++)this._eachEntry(e[n],n)},G.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var o=j(e);if(o===y&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===R){var i=new n(N);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},G.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===A&&(this._remaining--,t===S?x(r,n):this._result[e]=n),0===this._remaining&&T(r,this._result)},G.prototype._willSettleAt=function(t,e){var n=this;F(t,void 0,function(t){return n._settledAt(C,e,t)},function(t){return n._settledAt(S,e,t)})},R.all=function(t){return new G(this,t).promise},R.race=function(o){var i=this;return n(o)?new i(function(t,e){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(t,e)}):new i(function(t,e){return e(new TypeError("You must pass an array to race."))})},R.resolve=w,R.reject=function(t){var e=new this(N);return x(e,t),e},R._setScheduler=function(t){o=t},R._setAsap=function(t){u=t},R._asap=u,R.prototype={constructor:R,then:y,catch:function(t){return this.then(null,t)}},U(),R.polyfill=U,R.Promise=R}),"undefined"==typeof Promise&&ES6Promise.polyfill(),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],e):"object"==typeof exports?module.exports=e():t.StackFrame=e()}(this,function(){"use strict";function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(t){return t.charAt(0).toUpperCase()+t.substring(1)}function t(t){return function(){return this[t]}}var e=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],s=e.concat(o,i,["args"]);function u(t){if(t instanceof Object)for(var e=0;e<s.length;e++)t.hasOwnProperty(s[e])&&void 0!==t[s[e]]&&this["set"+r(s[e])](t[s[e]])}u.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof u)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(t)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(n(this.getLineNumber())?":"+this.getLineNumber():"")+(n(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var a=0;a<e.length;a++)u.prototype["get"+r(e[a])]=t(e[a]),u.prototype["set"+r(e[a])]=function(e){return function(t){this[e]=Boolean(t)}}(e[a]);for(var c=0;c<o.length;c++)u.prototype["get"+r(o[c])]=t(o[c]),u.prototype["set"+r(o[c])]=function(e){return function(t){if(!n(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(o[c]);for(var f=0;f<i.length;f++)u.prototype["get"+r(i[f])]=t(i[f]),u.prototype["set"+r(i[f])]=function(e){return function(t){this[e]=String(t)}}(i[f]);return u}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],e):"object"==typeof exports?module.exports=e(require("source-map/lib/source-map-consumer"),require("stackframe")):t.StackTraceGPS=e(t.SourceMap||t.sourceMap,t.StackFrame)}(this,function(i,f){"use strict";function e(r){return new Promise(function(t,e){var n=new XMLHttpRequest;n.open("get",r),n.onerror=e,n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300||"file://"===r.substr(0,7)&&n.responseText?t(n.responseText):e(new Error("HTTP status: "+n.status+" retrieving "+r)))},n.send()})}function n(t){if("undefined"!=typeof window&&window.atob)return window.atob(t);throw new Error("You must supply a polyfill for window.atob in this environment")}function r(t){if("object"!=typeof t)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof t.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof t.lineNumber||t.lineNumber%1!=0||t.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof t.columnNumber||t.columnNumber%1!=0||t.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}return function t(c){if(!(this instanceof t))return new t(c);c=c||{},this.sourceCache=c.sourceCache||{},this.sourceMapConsumerCache=c.sourceMapConsumerCache||{},this.ajax=c.ajax||e,this._atob=c.atob||n,this._get=function(a){return new Promise(function(t,e){var n="data:"===a.substr(0,5);if(this.sourceCache[a])t(this.sourceCache[a]);else if(c.offline&&!n)e(new Error("Cannot make network requests in offline mode"));else if(n){var r=a.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(r){var o=r[0].length,i=a.substr(o),s=this._atob(i);t(this.sourceCache[a]=s)}else e(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(a,{method:"get"});(this.sourceCache[a]=u).then(t,e)}}.bind(this))},this._getSourceMapConsumer=function(r,o){return new Promise(function(t,e){if(this.sourceMapConsumerCache[r])t(this.sourceMapConsumerCache[r]);else{var n=new Promise(function(e,t){return this._get(r).then(function(t){"string"==typeof t&&(t=function(t){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(t);throw new Error("You must supply a polyfill for JSON.parse in this environment")}(t.replace(/^\)\]\}'/,""))),void 0===t.sourceRoot&&(t.sourceRoot=o),e(new i.SourceMapConsumer(t))},t)}.bind(this));t(this.sourceMapConsumerCache[r]=n)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(n,t){this.getMappedLocation(e).then(function(t){function e(){n(t)}this.findFunctionName(t).then(n,e).catch(e)}.bind(this),t)}.bind(this))},this.findFunctionName=function(i){return new Promise(function(o,t){r(i),this._get(i.fileName).then(function(t){var e=i.lineNumber,n=i.columnNumber,r=function(t,e){for(var n=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],r=t.split("\n"),o="",i=Math.min(e,20),s=0;s<i;++s){var u=r[e-s-1],a=u.indexOf("//");if(0<=a&&(u=u.substr(0,a)),u){o=u+o;for(var c=n.length,f=0;f<c;f++){var h=n[f].exec(o);if(h&&h[1])return h[1]}}}}(t,e);o(r?new f({functionName:r,args:i.args,fileName:i.fileName,lineNumber:e,columnNumber:n}):i)},t).catch(t)}.bind(this))},this.getMappedLocation=function(c){return new Promise(function(u,t){!function(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}(),r(c);var a=this.sourceCache,o=c.fileName;this._get(o).then(function(t){var e=function(t){for(var e,n,r=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/gm;n=r.exec(t);)e=n[1];if(e)return e;throw new Error("sourceMappingURL not found")}(t),n="data:"===e.substr(0,5),r=o.substring(0,o.lastIndexOf("/")+1);return"/"===e[0]||n||/^https?:\/\/|^\/\//i.test(e)||(e=r+e),this._getSourceMapConsumer(e,r).then(function(t){return(o=c,i=t,s=a,new Promise(function(t,e){var n=i.originalPositionFor({line:o.lineNumber,column:o.columnNumber});if(n.source){var r=i.sourceContentFor(n.source);r&&(s[n.source]=r),t(new f({functionName:n.name||o.functionName,args:o.args,fileName:n.source,lineNumber:n.line,columnNumber:n.column}))}else e(new Error("Could not get original source for given stackframe and source map"))})).then(u).catch(function(){u(c)});var o,i,s})}.bind(this),t).catch(t)}.bind(this))}}});
//# sourceMappingURL=stacktrace-gps-with-polyfills.min.js.map
